<?php

class Shophub_ShopHubConnector_TestController extends Mage_Core_Controller_Front_Action
{

    /**
     * http://www.magentoroot.com/shophubconnector/test/createConfigurableProduct/
     */
    public function createConfigurableProductAction()
    {
        $configProductData = $this->getDataForConfigurableProduct();

        $configProductSetting = [
            'attributes_for_config' => ['size']
        ];

        /** @var Shophub_ShopHubConnector_Helper_Catalog_Products $productHelper */
        $productHelper = Mage::helper('shophubconnector/catalog_products');

        $configProductId = $productHelper->createConfigurableProduct($configProductData, $configProductSetting);
        echo ($configProductId);
    }

    /**
     * http://www.magentoroot.com/shophubconnector/test/createSimpleProduct/
     */
    public function createSimpleProductAction()
    {
        $simpleProductData = $this->getDataForSimpleProduct();

        $configProductSettings = [
            'parent_product_sku' => 'conf_1497699873',
            'attributes_for_config' => ['size'],
            'attribute_option_labels' => [
                'size' => '220x220cm'
            ]
        ];

        /** @var Shophub_ShopHubConnector_Helper_Catalog_Products $productHelper */
        $productHelper = Mage::helper('shophubconnector/catalog_products');
        $simpleProductId = $productHelper->createSimpleProduct($simpleProductData, $configProductSettings);
        echo ($simpleProductId);
    }

    /**
     * http://www.magentoroot.com/shophubconnector/test/createSimpleAndConfigProduct/
     */
    public function createSimpleAndConfigProductAction()
    {
        $this->createConfigurableProductAction();
    }

    private function getDataForConfigurableProduct()
    {
        $productArray = array(

            'sku' => 'conf_' . time(),

            'type_id' => 'configurable',

            'tax_class_id' => 1, // TODO: if not given generate
            'name' => 'Name' . time(),
            'short_description' => 'adf',
            'meta_keyword' => 'asdf',
            'meta_description' => 'asdf',
            'url_key' => 'test-georg-100x160cm',
            'meta_title' => '',
            'products_merger' => '',
            'color_display' => '1336',
            'carpet_type' => '1553',
            'year' => '',
            'height' => '1308',
            'wunschmass_price_per_unit' => '',
            'wunschmass_sizing_rules' => ';;;;',
            'knots' => '',
            'price' => 26.40,
            'weight' => 22000, // TODO: if not given generate
            'ek' => false,
            'marken' => NULL,
            'art_nr' => 'a' . time(),
            'status' => 1, // TODO: if not given generate
            'supplier' => '965',
            'lieferzeit' => '1187'
        );
        return $productArray;
    }

    private function getDataForSimpleProduct()
    {
        $productArray = array(

            'name' => 'test georg- 100x160cm 65x130cm',

            'sku' => 'simple_' . time(),
            'art_nr' => 'a' . time(),
            'type_id' => 'simple',

            'tax_class_id' => 1, // TODO: if not given generate
            'status' => 1, // TODO: if not given generate
            'price' => '',
            'weight' => 22000, // TODO: if not given generate
            'ek' => 0.0,
            'supplier' => '965',
            'lieferzeit' => '1187',

            'special_price' => '',
        );
        return $productArray;
    }

}








